# 4.4 节的练习

### 4.4.1: 为下面的每一个文法设计一个预测分析器，并给出预测分析表。你可能先要对文法进行提取左公因子或消除左递归的操作。

#### 解答

1. S -> 0S1 | 01

首先提取左公因子得到以下文法：
```
S -> 0S'
S' -> S1 | 1
```

其中各个非终结符号的FIRST集合和FOLLOW集合如下所示：
| | FIRST | FOLLOW |
|--|:------:|:-----:|
|S| { 0 } | { 1 , $ } |
|S'| { 0 , 1 } | { 1 , $ } |

因此可以构造出以下对应的预测分析器：
| | 0 | 1 | $ |
|:-:|:------:|:-----:|:-:|
|S| S -> 0S' |  |  |
|S'| S' -> S1 | S' -> 1 |  |

2. S -> +SS | *SS | a

文法的预测分析表如下所示：

| | + | * | a | $ |
|:-:|:------:|:-----:|:-:|:-:|
|S| S -> +SS | S -> *SS | S->a |  |


3. S -> S(S)S | ε

首先消除左递归得到以下文法：
```
S  -> S'
S' -> (S)SS' | ε
```

文法的FIRST和FOLLOW集合如下所示：
| | FIRST | FOLLOW |
|--|:------:|:-----:|
|S| { ( , ε } | { ( , ) , $ } |
|S' | { ( , ε } | { ( , ) , $ } |

因此可以构造出以下对应的预测分析器：

| | ( | ) | $ |
|:-:|:------:|:-----:|:-:|
|S| S -> S' | S -> S' | S -> S' |
|S'| S' -> (S) SS'<br></br>S' -> ε | S' -> ε | S' -> ε |


4. S -> S+S | SS | (S) | S* | a

首先消除左递归得到以下文法：
```
S  -> (S)S' | aS'
S' -> +SS' | SS' | *S' | ε
```
文法的FIRST和FOLLOW集合如下所示：

| | FIRST | FOLLOW |
|--|:------:|:-----:|
|S| { ( , a } | { + , ( , ) , a , * , $ } |
|S' | { + , ( , a, *, ε } | { + , ( , ) , a , * , $ } |

因此可以构造出以下对应的预测分析器：

| | ( | ) | + | * | a | $ |
|:-:|:------:|:-----:|:-:|:-:|:-:|:-:|
|S| S -> (S)S' |  |  |  | S->aS' |  |
|S'| S' -> SS' |  | S' -> +SS' | S' -> *S' | S' -> SS' |  |

5. S -> (L) | a

6. 布尔表达式的文法

```
bexpr -> bexpr or bterm | bterm
bterm -> bterm and bfactor | bfactor
bfactor -> not bfactor | (bexpr) | true | false
```

   


### 4.4.2: 有没有可能通过某种方法修改练习4.2.1中的文法，构造出一个与该练习中的语言(运算分量为a的后缀表达式)对应的预测分析器？

#### 解答

首先通过消除左递归和提取公因子将文法修改为
```
S  -> aS'
S' -> SA | ε
A  -> +S' | *S' 
```
其中各个非终结符号的FIRST集合和FOLLOW集合如下所示：
| | FIRST | FOLLOW |
|--|:------:|:-----:|
|S| { a } | { $ , + , * } |
|S'| { a , ε } | { $ , + , * } |
|A|{ + , * }|{ $ , + , * }|

因此可以构造出以下对应的预测分析器：
| | a | + | * | $ |
|--|:------:|:-----:|:-:|:-:|
|S| S -> aS' |  |  |  |
|S'| S' -> SA | S' -> ε | S' -> ε | S' -> ε |
|A||A -> +S'| A -> *S' |  |

### 4.4.3: 计算练习4.2.1的文法的FIRST和FOLLOW集合。
```
S -> SS+ | SS* | a
```
#### 解答
| | FIRST | FOLLOW |
|--|:------:|:-----:|
|S| { a } | { $ , + , * } |

### 4.4.4: 计算练习4.2.2中各个文法的FIRST和FOLLOW集合。
#### 解答
1. S -> 0S1 | 01
| | FIRST | FOLLOW |
|--|:------:|:-----:|
|S| { 0 } | { 1 } |
2. S -> +SS | *SS | a
| | FIRST | FOLLOW |
|--|:------:|:-----:|
|S| { + , * , a } | { + , * , a } |
3. S -> S(S)S | ε

首先消除左递归得到以下文法：
```
S  -> S'
S' -> (S)SS' | ε
```
文法的FIRST和FOLLOW集合如下所示：
| | FIRST | FOLLOW |
|--|:------:|:-----:|
|S| { ( , ε } | { ( , ) , $ } |
|S' | { ( , ε } | { ( , ) , $ } |

4. S -> S + S | SS | (S) | S* | a

首先消除左递归得到以下文法：
```
S  -> (S)S' | aS'
S' -> +SS' | SS' | *S' | ε
```
文法的FIRST和FOLLOW集合如下所示：

| | FIRST | FOLLOW |
|--|:------:|:-----:|
|S| { ( , a } | { + , ( , ) , a , * , $ } |
|S' | { + , ( , a, *, ε } | { + , ( , ) , a , * , $ } |

5. S -> (L) | a

| | FIRST | FOLLOW |
|--|:------:|:-----:|
|S| { ( , a } | { $ } |

6. S -> aSbS | bSaS | ε

| | FIRST | FOLLOW |
|:-:|:------:|:-----:|
|S| { a , b ,  ε } | { a , b , $ } |


7. 布尔表达式对应的文法
```
bexpr -> bexpr or bterm | bterm
bterm -> bterm and bfactor | bfactor
bfactor -> not bfactor | (bexpr) | true | false
```

首先消除左递归得到以下文法：
```
bexpr -> bterm bexpr'
bexpr' -> or bterm bexpr' | ε
bterm -> bfactor bterm'
bterm' -> and bfactor bterm' | ε
bfactor -> not bfactor | (bexpr) | true | false
```
文法的FIRST和FOLLOW集合如下所示：

| | FIRST | FOLLOW |
|:-:|:------:|:-----:|
|bexpr| { not , ( , true , false } | { ) , $ } |
|bexpr' | { or , ε } | { ) , $ } |
|bterm | { not , ( , true , false } | { or , ) , $ } |
|bterm' | { and , ε } | { or , ) , $ } |
|bfactor | { not , ( , true , false } | { and , or , ) , $ } |
